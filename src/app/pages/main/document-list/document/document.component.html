<div class="qrCode">
  <div class="document__uploads">
    <div class="document__uploads__item">
      <div
        style="width: 100%; display: flex; justify-content: flex-end; gap: 20px"
      >
        <button
          (click)="handlePreview(selectedFiles?.original || original)"
          [disabled]="!original"
          class="document__uploads__item__btn"
          nz-button
          nzType="default"
        >
          <span nz-icon nzTheme="outline" nzType="eye"></span>
          Просмотр
        </button>

        <button
          (nzOnConfirm)="deleteSelectedPdf('original')"
          [disabled]="!original"
          [nzDanger]="original"
          class="document__uploads__item__btn"
          nz-button
          nz-popconfirm
          nzCancelText="Отмена"
          nzOkText="Ok"
          nzPopconfirmTitle="Вы уверены ?"
          nzType="primary"
        >
          Удалить файл
        </button>
      </div>

      @if (!original) {
        <nz-upload
          [nzShowUploadList]="false"
          [nzBeforeUpload]="beforeUploadOriginal"
          [nzAccept]="'application/pdf'"
          class="document__uploads__item__uploader"
          nzListType="picture-card"
        >
          <span
            class="upload-icon"
            style="margin-right: 10px"
            nz-icon
            [nzType]="loading ? 'loading' : 'plus'"
          ></span>
          <div class="ant-upload-text">Загрузить только PDF-файл!</div>
        </nz-upload>
      } @else {
        <pdf-viewer
          [src]="original"
          [rotation]="0"
          [original-size]="false"
          [show-all]="true"
          [fit-to-page]="false"
          [zoom]="1"
          [zoom-scale]="'page-fit'"
          [stick-to-page]="false"
          [render-text]="true"
          [external-link-target]="'blank'"
          [autoresize]="false"
          [show-borders]="true"
          style="
            width: 100%;
            height: 70vh;
            margin: 0 auto;
            border: 1px solid #f0f0f0;
          "
        ></pdf-viewer>
      }
    </div>
    <div class="document__uploads__item">
      <div
        style="width: 100%; display: flex; justify-content: flex-end; gap: 20px"
      >
        <button
          (click)="handlePreview(selectedFiles?.translated || translated)"
          [disabled]="!translated"
          class="document__uploads__item__btn"
          nz-button
          nzType="default"
        >
          <span nz-icon nzTheme="outline" nzType="eye"></span>
          Просмотр
        </button>

        <button
          (nzOnConfirm)="deleteSelectedPdf('translated')"
          [disabled]="!translated"
          [nzDanger]="translated"
          class="document__uploads__item__btn"
          nz-button
          nz-popconfirm
          nzCancelText="Отмена"
          nzOkText="Ok"
          nzPopconfirmTitle="Вы уверены ?"
          nzType="primary"
        >
          Удалить файл
        </button>

        <button
          (click)="save()"
          [disabled]="!translated"
          class="document__uploads__item__btn"
          nz-button
          nzType="primary"
          style="margin-top: 20px"
        >
          Сохранить
        </button>
      </div>

      @if (!translated) {
        <nz-upload
          [nzShowUploadList]="false"
          [nzBeforeUpload]="beforeUploadTranslated"
          [nzAccept]="'application/pdf'"
          class="document__uploads__item__uploader"
          nzListType="picture-card"
        >
          <span
            class="upload-icon"
            style="margin-right: 10px"
            nz-icon
            [nzType]="loading ? 'loading' : 'plus'"
          ></span>
          <div class="ant-upload-text">Загрузить только PDF-файл!</div>
        </nz-upload>
      } @else {
        <pdf-viewer
          [src]="translated"
          [rotation]="0"
          [original-size]="false"
          [show-all]="true"
          [fit-to-page]="false"
          [zoom]="1"
          [zoom-scale]="'page-fit'"
          [stick-to-page]="false"
          [render-text]="true"
          [external-link-target]="'blank'"
          [autoresize]="false"
          [show-borders]="true"
          style="
            width: 100%;
            height: 70vh;
            margin: 0 auto;
            border: 1px solid #f0f0f0;
          "
        ></pdf-viewer>
      }
    </div>
  </div>
</div>

<nz-modal
  (nzOnCancel)="previewVisible = false; previewFile = null"
  [nzContent]="previewModalContent"
  [nzFooter]="null"
  [nzVisible]="previewVisible"
  [nzWidth]="'80%'"
>
  <ng-template #previewModalContent>
    <pdf-viewer
      [autoresize]="false"
      [external-link-target]="'blank'"
      [fit-to-page]="false"
      [original-size]="false"
      [render-text]="true"
      [rotation]="0"
      [show-all]="true"
      [show-borders]="true"
      [src]="previewFile"
      [stick-to-page]="false"
      [zoom-scale]="'page-width'"
      [zoom]="1"
      style="
        width: 100%;
        height: 80vh;
        margin: 0 auto;
        border: 1px solid #f0f0f0;
      "
    ></pdf-viewer>
  </ng-template>
</nz-modal>
